<!DOCTYPE html>
<html xmlns:th="[http://www.thymeleaf.org](http://www.thymeleaf.org/)">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>phonebook</title>
<style>
table {
	margin: auto;
	border: 1px solid #444444;
	border-collapse: collapse;
}

th, td {
	padding: 10px;
	border: 1px solid #444444;
	text-align: center;
}
.page{
	padding : 0px 10px;
}
tb.landscape{
	display: flex;
	padding : 0px 10px;
}
</style>
</head>
<body>

 <div th:each="test : ${test}">
 	<div th:text="${test.count}"></div>
 	<!--  <div th:text="${test[0]}"></div>
 	 <div th:text="${test[1]}"></div>
 	 <div th:text="${test[2]}"></div>
 	 <div th:text="${test[3]}"></div>
 	  <div th:text="${test[4]}"></div>-->
  </div> 
	<h1>지인 목록</h1>
	<a href="http://localhost:8089/list">메인 이동</a>
	<table>
		<tr>
			<th>순번</th>
			<th>지인이름</th>
			<th>전화 수</th>
			<th>등록일시</th>
			<th>수정일시</th>
			<th>업무</th>
		</tr>
		<!-- <div th:text = "${#lists.size(friendlist)}"></div> -->
		<td colspan="6" th:if="${endPage == -1} ">지인 목록 결과가
			없습니다.</td>
		<tr th:each="flist, index : ${friendlist}" th:if= "${num3 == null}">
			<td th:text="(${flist.frndSeq}-${flist.frndSeq}+${index.index}+1 ) + ${nowPage * sizePage}"></td>
			<td><a
				th:href="@{/detail(frndNm = ${flist.frndNm}, frndseq= ${flist.frndSeq})}"><div
						th:text="${flist.frndNm}"></div></a></td>
			<td  th:text="${flist.phone.size}"></td>
			<td th:text="${#temporals.format(flist.createdDate, 'yyyy.MM.dd HH:mm:ss')}"></td>
			<td th:text="${#temporals.format(flist.modifiedDate, 'yyyy.MM.dd HH:mm:ss')}"></td>
			<td><button type="button"
					th:onclick="'location.href=\'/update?frndseq='+ @{${flist.frndSeq}} + '\''">수정</button>
				<button type="button"
					th:onclick="'location.href=\'/delete?frndseq='+ @{${flist.frndSeq}} + '\''">삭제</button></td>
		</tr>
		<!-- ------------------전화번호로 검색------------------------ -->
		<tr th:each="flist, index : ${friendlist}" th:if= "${num3 != null}">
			<td th:text="(${flist.friend.frndSeq}-${flist.friend.frndSeq}+${index.index}+1 ) + ${nowPage * sizePage}"></td>
			<td><a
				th:href="@{/detail(frndNm = ${flist.friend.frndNm}, frndseq= ${flist.friend.frndSeq})}"><div
						th:text="${flist.friend.frndNm}"></div></a></td>
			<td  th:text="${#lists.size(flist)}"></td>
			<td th:text="${#temporals.format(flist.createdDate, 'yyyy.MM.dd HH:mm:ss')}"></td>
			<td th:text="${#temporals.format(flist.modifiedDate, 'yyyy.MM.dd HH:mm:ss')}"></td>
			<td><button type="button"
					th:onclick="'location.href=\'/update?frndseq='+ @{${flist.friend.frndSeq}} + '\''">수정</button>
				<button type="button"
					th:onclick="'location.href=\'/delete?frndseq='+ @{${flist.friend.frndSeq}} + '\''">삭제</button></td>
		</tr>
		<!-- ------------------------------------------ -->
		<tr>
			<td colspan="6" class="landscape">
				<form action="/list" name="search">
				<select name="search"  >
						<option value="name">지인명</option>
						<option value="num3">전화번호 뒷자리</option>
				</select>
				<input class="search" type="text" name="searchtext" /> 
						<button type="submit" class="search"> 검색 </button> 
						<button type="button" onClick="location.href='/registration'" >등록</button>
				</form>
			</td>
		</tr>
		<tr >
			<!-- <div th:text="${nowPage}"> </div>
			<div th:text="${sizePage}"></div>
			<div th:text="${nowPage * sizePage}"></div> -->
		
			<td colspan="6" th:if="${totalPage != 0 } and ${endPage != -1}">
			<a  th:if="${0 != nowPage}"  th:href="@{/list?(page = 0)}" class="page"  > <span> 처음  </span></a>
			<a  th:if="${0 != nowPage}"  th:href="@{/list?(page = ${nowPage - 1})}" class="page"  > <span> 이전  </span></a>
				<span th:each="page, index : ${#numbers.sequence(0, endPage)}">
					<a  th:if="${page != nowPage}"  th:href="@{/list?(page = ${index.index })}" class="page" th:text ="${index.index + 1}" ></a>
					 <strong class="page" th:if="${page == nowPage}" th:text="${page+1}" ></strong>
				</span>
				<a  th:if="${endPage != nowPage}"  th:href="@{/list?(page = ${nowPage + 1})}" class="page"  > <span> 다음  </span></a>
				<a  th:if="${endPage != nowPage} and ${endPage != -1}"  th:href="@{/list?(page = ${totalPage-1})}" class="page"  > <span> 끝  </span></a>
			</td>
		</tr>
	</table>
	
</body>
</html>